<!-- Messages template for consistent display of Django messages -->
<div id="messages-container" class="fixed top-4 right-4 z-50 w-80 space-y-2">
    {% if messages %}
        {% for message in messages %}
            <div class="message-toast bg-{{ message.tags }} text-white p-4 rounded-lg shadow-lg flex items-center justify-between animate-slide-in" 
                 role="alert" data-message-id="{{ forloop.counter }}">
                <div class="flex items-center">
                    {% if message.tags == 'success' %}
                        <i class="fas fa-check-circle mr-2"></i>
                    {% elif message.tags == 'error' %}
                        <i class="fas fa-exclamation-circle mr-2"></i>
                    {% elif message.tags == 'warning' %}
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                    {% elif message.tags == 'info' %}
                        <i class="fas fa-info-circle mr-2"></i>
                    {% endif %}
                    <span>{{ message }}</span>
                </div>
                <button type="button" class="text-white hover:text-gray-200 focus:outline-none" 
                        onclick="dismissMessage('{{ forloop.counter }}')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        {% endfor %}
    {% endif %}
</div>

<style>
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
    
    .animate-slide-in {
        animation: slideIn 0.3s ease-out forwards;
    }
    
    .animate-fade-out {
        animation: fadeOut 0.3s ease-out forwards;
    }
    
    .bg-success {
        background-color: #10B981;
    }
    
    .bg-error {
        background-color: #EF4444;
    }
    
    .bg-warning {
        background-color: #F59E0B;
    }
    
    .bg-info {
        background-color: #3B82F6;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-dismiss messages after 5 seconds
        const messages = document.querySelectorAll('.message-toast');
        messages.forEach(message => {
            setTimeout(() => {
                const messageId = message.getAttribute('data-message-id');
                dismissMessage(messageId);
            }, 5000);
        });
    });
    
    function dismissMessage(messageId) {
        const message = document.querySelector(`[data-message-id="${messageId}"]`);
        if (message) {
            message.classList.add('animate-fade-out');
            setTimeout(() => {
                message.remove();
            }, 300);
        }
    }
</script>