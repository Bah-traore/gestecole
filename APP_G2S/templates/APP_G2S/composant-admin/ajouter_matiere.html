{% extends 'base_admin.html' %}
{%load perso_filtre %}
{% block content %}
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <h2 class="text-3xl font-extrabold text-gray-800 mb-8 text-center">Ajouter une nouvelle matière</h2>

    {% if can_add_subject %}
    <form method="POST" class="space-y-6">
        {% csrf_token %}

        <div>
            <label class="block text-gray-700 text-sm font-medium mb-2">Nom de la matière</label>
            {{ form.nom|add_class:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" }}
            {% if form.nom.errors %}
                <p class="text-red-500 text-sm mt-1">{{ form.nom.errors.0 }}</p>
            {% endif %}
        </div>

        <div>
            <label class="block text-gray-700 text-sm font-medium mb-2">Coefficient</label>
            {{ form.coefficient|add_class:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" }}
            {% if form.coefficient.errors %}
                <p class="text-red-500 text-sm mt-1">{{ form.coefficient.errors.0 }}</p>
            {% endif %}
        </div>

        <div class="flex items-center justify-end">
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300">
                Enregistrer
            </button>
        </div>
    </form>
    {% else %}
    <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative mb-4" role="alert">
        <span class="block sm:inline">Vous n'avez pas les permissions nécessaires pour ajouter une matière.</span>
    </div>
    {% endif %}

    {% if messages %}
    <div class="mt-6">
        {% for message in messages %}
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
                <span class="block sm:inline">{{ message }}</span>
            </div>
        {% endfor %}
    </div>
    {% endif %}

    <script>
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-4 right-4 bg-${type === 'success' ? 'green' : 'red'}-500 text-white px-4 py-2 rounded-lg shadow-lg`;
            toast.innerText = message;
            document.body.appendChild(toast);
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 3000);
        }
    </script>
</div>
{% endblock %}
